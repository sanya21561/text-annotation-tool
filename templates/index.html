<!DOCTYPE html>
<html>
<head>
    <title>Dynamic Tree</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.10/themes/default/style.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.10/jstree.min.js"></script>
</head>
<body>
    <div id="categoryTree"></div>
    <button id="savePath">Save Path</button>

    <script>
        const categoryTree = [
    {
        "text": "Structure",
        "children": [
            {
                "text": "Topics",
                "children": [
                    "Relevant",
                    "Irrelevant",
                    "Obsolete"
                ]
            },
            {
                "text": "Organization",
                "children": []
            },
            {
                "text": "Order of Topics",
                "children": []
            },
            {
                "text": "Difficulty",
                "children": []
            },
            {
                "text": "Workload",
                "children": []
            }
        ]
    },
    {
        "text": "Evaluation",
        "children": [
            {
                "text": "Grading Criteria",
                "children": [
                    "Assignment",
                    "Quiz",
                    "Midsem/Endsem",
                    "Project",
                    "Presentation",
                    "Labs/Tutorial/Worksheet"
                ]
            },
            {
                "text": "Correctness in Evaluation",
                "children": [
                    "Fairness",
                    "Biasness",
                    "Transparency"
                ]
            },
            {
                "text": "Solutions",
                "children": [
                    "Timings of Upload",
                    "Correctness",
                    "Explanation"
                ]
            },
            {
                "text": "Quality of Questions",
                "children": [
                    "Correctness & Soundness",
                    "Difficulty",
                    "Relevance with Lecture"
                ]
            }
        ]
    },
    {
        "text": "Course Material",
        "children": [
            {
                "text": "Lecture Slides",
                "children": [
                    {
                        "text": "Quality",
                        "children": [
                            "Understandability",
                            "Clarity",
                            "Organization",
                            "Presentation"
                        ]
                    },
                    {
                        "text": "Timings of Upload",
                        "children": []
                    },
                    {
                        "text": "Relevance",
                        "children": [
                            "Coverage of Topics",
                            "Relation with Lecture"
                        ]
                    }
                ]
            },
            {
                "text": "Labs/Tutorial/Assignment Questions",
                "children": [
                    {
                        "text": "Relevance",
                        "children": []
                    },
                    {
                        "text": "Quality",
                        "children": [
                            "Pace",
                            "Difficulty"
                        ]
                    }
                ]
            },
            {
                "text": "Extra Material",
                "children": [
                    "Reference Material",
                    "Practice Sets",
                    "Previous Year Question Papers"
                ]
            }
        ]
    },
    {
        "text": "Lecture Delivery",
        "children": [
            {
                "text": "Teaching Assistants (TAs)",
                "children": [
                    {
                        "text": "Punctuality",
                        "children": []
                    },
                    {
                        "text": "Pedagogical Skills",
                        "children": [
                            "Effectiveness",
                            {
                                "text": "Granularity of Teaching",
                                "children": ["High", "Medium", "Fine"]
                            },
                            "Subject Knowledge",
                            {
                                "text": "Personal Skills",
                                "children": ["Traits", "Voice", "Language"]
                            },
                            {
                                "text": "Interactiveness",
                                "children": ["Approachability", "Peer Engagement"]
                            }
                        ]
                    }
                ]
            },
            {
                "text": "Professor",
                "children": [
                    {
                        "text": "Punctuality",
                        "children": []
                    },
                    {
                        "text": "Pace",
                        "children": []
                    },
                    {
                        "text": "Topics Covered",
                        "children": []
                    },
                    {
                        "text": "Pedagogical Skills",
                        "children": [
                            "Effectiveness",
                            {
                                "text": "Granularity of Teaching",
                                "children": ["High", "Medium", "Fine"]
                            },
                            "Subject Knowledge",
                            {
                                "text": "Personal Skills",
                                "children": ["Traits", "Voice", "Language"]
                            },
                            {
                                "text": "Interactiveness",
                                "children": ["Approachability", "Peer Engagement"]
                            }
                        ]
                    }
                ]
            }
        ]
    },
    {
        "text": "General",
        "children": [
            {
                "text": "Suggestions",
                "children": [
                    {
                        "text": "Course Material",
                        "children": []
                    },
                    {
                        "text": "Evaluation",
                        "children": []
                    },
                    {
                        "text": "Lecture",
                        "children": []
                    },
                    {
                        "text": "Structure",
                        "children": []
                    }
                ]
            },
            "Everything",
            "Nothing"
        ]
    }
];

        $(function () {
            $('#categoryTree').jstree({
                'core': {
                    'data': categoryTree
                }
            }).on('changed.jstree', function (e, data) {
                // Handle node selection here
                var selectedNode = data.instance.get_node(data.selected[0]);
                console.log('Selected Node: ' + selectedNode.text);
            });

            $('#savePath').on('click', function () {
                const selectedNode = $('#categoryTree').jstree('get_selected')[0];
                const pathToSelectedNode = $('#categoryTree').jstree('get_path', selectedNode, '/');

                // Send a request to the server to save the path
                $.ajax({
                    type: 'POST',
                    url: '/save_path',
                    data: JSON.stringify({ path: pathToSelectedNode }),
                    contentType: 'application/json',
                    success: function(response) {
                        alert('Path saved successfully');
                    }
                });
            });
        });
    </script>
</body>
</html>
